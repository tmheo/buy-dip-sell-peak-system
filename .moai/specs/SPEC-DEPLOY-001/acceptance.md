# SPEC-DEPLOY-001 인수 조건

## 기능 테스트

### AC-001: Supabase Local 환경

| 조건 | 기대 결과 | 검증 방법 |
|------|----------|----------|
| `supabase start` 실행 | Docker 컨테이너 시작 | 명령어 출력 확인 |
| Studio 접속 | localhost:54323 접근 가능 | 브라우저 확인 |
| DB 연결 | PostgreSQL 연결 성공 | `psql` 또는 앱 연결 |

### AC-002: Drizzle ORM 스키마

| 조건 | 기대 결과 | 검증 방법 |
|------|----------|----------|
| 스키마 정의 | 11개 테이블 정의 완료 | 코드 리뷰 |
| 타입 추론 | TypeScript 타입 자동 생성 | IDE 자동완성 |
| 관계 정의 | FK 관계 정의 완료 | 스키마 검토 |

### AC-003: 마이그레이션

| 조건 | 기대 결과 | 검증 방법 |
|------|----------|----------|
| `drizzle-kit push` | 테이블 생성 성공 | DB 테이블 확인 |
| 인덱스 생성 | 성능 인덱스 적용 | `\d+ table_name` |
| 제약조건 | FK, UNIQUE 적용 | 스키마 확인 |

### AC-004: 환경 분기

| 조건 | 기대 결과 | 검증 방법 |
|------|----------|----------|
| 개발 환경 | Supabase Local 연결 | 연결 로그 |
| 환경변수 누락 | 명확한 에러 메시지 | 에러 핸들링 |

---

## 비기능 테스트

### 성능

| 항목 | 기준 | 검증 방법 |
|------|------|----------|
| DB 연결 시간 | < 1초 | 타이밍 로그 |
| 연결 풀 | 최대 10개 | 설정 확인 |

### 보안

| 항목 | 기준 | 검증 방법 |
|------|------|----------|
| 환경변수 | .env.local gitignore | .gitignore 확인 |
| 연결 문자열 | 하드코딩 없음 | 코드 검토 |

---

## 산출물 체크리스트

- [ ] `supabase/config.toml` 생성
- [ ] `src/database/schema/` 디렉토리 구조
- [ ] `src/database/db.ts` Drizzle 클라이언트
- [ ] `drizzle.config.ts` 설정 파일
- [ ] `.env.example` 환경변수 템플릿
- [ ] `package.json` 스크립트 추가
